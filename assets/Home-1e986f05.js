import{f as b,I as C,a as L,b as $}from"./IconView-565824f3.js";import{_ as z,o,c as r,a as t,d as w,u as k,t as y,r as d,b as B,e as c,w as p,f as a,g as f,F as h,h as I,i as _,j as M,k as N,l as P,p as g}from"./index-32e3c838.js";import{N as x,g as S}from"./post-94e266d6.js";import{_ as V}from"./Pagination.vue_vue_type_script_setup_true_lang-938e5848.js";const H={},j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},R=t("path",{d:"M7.493 18.75c-.425 0-.82-.236-.975-.632A7.48 7.48 0 016 15.375c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75 2.25 2.25 0 012.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23h-.777zM2.331 10.977a11.969 11.969 0 00-.831 4.398 12 12 0 00.52 3.507c.26.85 1.084 1.368 1.973 1.368H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 01-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227z"},null,-1),A=[R];function F(e,u){return o(),r("svg",j,A)}const q=z(H,[["render",F]]),E={class:"w-full bg-white my-2 rounded-md overflow-hidden shadow-sm"},O={class:"flex pt-6 px-4"},T=["src"],G={class:"flex flex-col"},J={class:"mt-2 text-lg font-bold"},K={class:"ml-2 text-sm bg-yellow-300 px-1 py-0.5 rounded-md"},Q={class:"ml-2 text-sm bg-green-300 px-1 py-0.5 rounded-md"},U={class:"text-gray-500 flex items-center text-sm"},W={class:"ml-[80px] pl-4 pr-8"},X={class:"text-2xl leading-[60px]"},Y={class:""},Z={class:"flex h-10 mt-4"},tt={class:"h-full flex items-center justify-center hover:bg-gray-500/10 transition-colors"},et=w({__name:"PostPreview",props:{postData:null},setup(e){const u=k(),{devMode:l}=y(u),n=d(!1);function i(){n.value=!n.value}return(m,v)=>{const s=B("RouterLink");return o(),r("div",E,[c(s,{to:"/user/"+e.postData.user.uid},{default:p(()=>[t("div",O,[t("img",{class:"rounded-full w-16 h-16 mr-4 hover:scale-[1.1] transition-transform",src:e.postData.user.avatar,alt:"avatar"},null,8,T),t("div",G,[t("div",null,[t("span",J,a(e.postData.user.nickname),1),f(l)?(o(),r(h,{key:0},[t("span",K,"uid:"+a(e.postData.user.uid),1),t("span",Q,"pid:"+a(e.postData.pid),1)],64)):I("",!0)]),t("div",U,[t("span",null,a(f(b)(e.postData.createdAt)),1),c(C,{class:"w-4 h-4 inline-block ml-2 mr-1"}),t("span",null,a(e.postData.viewCount),1)])])])]),_:1},8,["to"]),c(s,{to:"/post/"+e.postData.pid},{default:p(()=>[t("div",W,[t("p",X,a(e.postData.title),1),t("p",Y,a(e.postData.text),1)])]),_:1},8,["to"]),t("div",Z,[c(s,{class:"flex-1",to:{path:"/post/"+e.postData.pid,query:{navigate:"comments"}}},{default:p(()=>[t("div",tt,[c(L,{class:"w-5 h-5 inline-block mr-1"}),t("span",null,a(e.postData._count.comments),1)])]),_:1},8,["to"]),t("button",{class:"flex-1 flex items-center justify-center hover:bg-gray-500/10 transition-colors",onClick:i},[n.value?(o(),_(q,{key:0,class:"w-5 h-5 inline-block mr-1 text-red-500"})):(o(),_($,{key:1,class:"w-5 h-5 inline-block mr-1"})),t("span",null,a(e.postData.like),1)])])])}}}),lt=w({__name:"Home",setup(e){const u=k();y(u);const l=d([]),n=d(1),i=d(0);M(()=>Math.ceil(i.value/g)),N(async()=>{x.start(),await m(),x.done()});async function m(){const s=l.value=await S(n.value);i.value=s.count,l.value=s.posts}async function v(s){n.value=s,await m()}return(s,st)=>(o(),r(h,null,[(o(!0),r(h,null,P(l.value,D=>(o(),_(et,{"post-data":D},null,8,["post-data"]))),256)),c(V,{"current-page":n.value,"total-count":i.value,"page-size":f(g),onChange:v},null,8,["current-page","total-count","page-size"])],64))}});export{lt as default};
