import{a as N,b as $,u as z,d as B}from"./admin-db900637.js";import{_}from"./NormalButton.vue_vue_type_script_setup_true_lang-be1719d2.js";import{_ as D}from"./Pagination.vue_vue_type_script_setup_true_lang-b2d29542.js";import{d as M,u as A,l as F,r as m,o as P,c as f,m as t,n,g as w,F as R,f as T,e as c,i as g,p as k,w as d,j as h,R as V,v as y}from"./index-b2c28bfa.js";import{N as C}from"./nprogress-a817ebd9.js";import"./_commonjsHelpers-28e086c5.js";const j=t("p",{class:"mb-4 text-2xl font-bold"},"用户管理",-1),I={class:"w-full table-fixed text-center"},q=t("colgroup",null,[t("col",{width:"10"}),t("col",{width:"10%"}),t("col",{width:"700"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"30%"})],-1),G=t("tr",null,[t("th",null,"UID"),t("th",null,"用户名"),t("th",null,"昵称"),t("th",null,"邮箱"),t("th",null,"性别"),t("th",null,"用户组"),t("th",null,"状态"),t("th",null,"头像"),t("th",null,"操作")],-1),H={class:"whitespace-nowrap"},J={class:"whitespace-nowrap"},K={class:"whitespace-nowrap overflow-ellipsis"},et=M({__name:"user-manage",setup(O){const u=A(),s=F(),p=m([]),r=m(1),i=m(0),x={0:"正常",2:"封禁"},E={MALE:"男",FEMALE:"男",SECRET:"保密"};P(()=>{l()});function l(){C.start(),p.value=[],N(u.token,r.value).then(a=>{p.value=a.users,i.value=a.count}).catch(a=>{s.error(a.message)}).finally(()=>{C.done()})}function b(a){window.open(a)}function U(a,o){o===0?$(u.token,a).then(e=>{s.success("封禁用户成功"),l()}).catch(e=>{s.error("封禁用户失败"+e.message)}):z(u.token,a).then(e=>{s.success("解禁用户成功"),l()}).catch(e=>{s.error("解禁用户失败："+e.message)})}function L(a){B(u.token,a).then(o=>{s.success("删除用户成功："),l()}).catch(o=>{s.error("删除用户失败："+o.message)})}function S(a){r.value=a,l()}return(a,o)=>(g(),f("div",null,[j,t("p",null,"用户总数："+n(i.value),1),t("p",null,"当前页："+n(r.value)+" , 总页数："+n(Math.ceil(i.value/w(k))),1),t("table",I,[q,G,(g(!0),f(R,null,T(p.value,e=>(g(),f("tr",null,[t("td",null,[c(w(V),{to:"/user/"+e.uid},{default:d(()=>[h(n(e.uid),1)]),_:2},1032,["to"])]),t("td",H,n(e.name),1),t("td",J,n(e.nickname),1),t("td",null,n(e.email),1),t("td",null,n(E[e.sex]),1),t("td",null,n(e.role),1),t("td",{class:y(e.status===2?"text-red-500":"")},n(x[e.status]),3),t("td",K,[c(_,{onClick:v=>b(e.avatar)},{default:d(()=>[h("查看图片")]),_:2},1032,["onClick"])]),t("td",null,[c(_,{onClick:v=>U(e.uid,e.status)},{default:d(()=>[h(n(e.status===0?"封禁":"解禁"),1)]),_:2},1032,["onClick"]),c(_,{onClick:v=>L(e.uid)},{default:d(()=>[h("删除")]),_:2},1032,["onClick"])])]))),256))]),c(D,{"current-page":r.value,"total-count":i.value,"page-size":w(k),onChange:S},null,8,["current-page","total-count","page-size"])]))}});export{et as default};
