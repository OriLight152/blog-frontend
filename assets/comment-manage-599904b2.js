import{f as z,h as P,i as S,j as T}from"./admin-d0afcbf5.js";import{_ as m}from"./NormalButton.vue_vue_type_script_setup_true_lang-77d36fc7.js";import{_ as $}from"./Pagination.vue_vue_type_script_setup_true_lang-540c9b31.js";import{d as y,u as B,j as I,r as d,o as L,c as h,k as t,l as a,e as p,F as M,b as V,a as _,g as f,p as g,q as j,w,h as C}from"./index-7fb9b2a6.js";import{N as v}from"./nprogress-131c7954.js";import{f as E}from"./index-b25eac40.js";const F=t("p",{class:"mb-4 text-2xl font-bold"},"评论管理",-1),q={class:"w-full table-fixed text-center"},A=t("colgroup",null,[t("col",{width:"10"}),t("col",{width:"700"}),t("col",{width:"100"}),t("col",{width:"100"}),t("col",{width:"20%"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"30%"})],-1),G=t("tr",null,[t("th",null,"CID"),t("th",null,"内容"),t("th",null,"发布者"),t("th",null,"所在文章"),t("th",null,"IP"),t("th",null,"回复ID"),t("th",null,"状态"),t("th",null,"评论时间"),t("th",null,"操作")],-1),H={class:"whitespace-nowrap"},J={class:"whitespace-nowrap"},K={class:"whitespace-nowrap"},O={class:"whitespace-nowrap"},tt=y({__name:"comment-manage",setup(Q){const c=B(),l=I(),i=d([]),r=d(1),u=d(0),k={0:"正常",2:"违规"};L(()=>{n()});function n(){v.start(),i.value=[],z(c.token,r.value).then(s=>{i.value=s.comments,u.value=s.count}).catch(s=>{l.error(s.message)}).finally(()=>{v.done()})}function x(s,o){o===0?P(c.token,s).then(e=>{l.success("标记评论成功"),n()}).catch(e=>{l.error("标记评论失败："+e.message)}):S(c.token,s).then(e=>{l.success("标记评论成功"),n()}).catch(e=>{l.error("标记评论失败："+e.message)})}function b(s){T(c.token,s).then(o=>{l.success("删除评论成功"),n()}).catch(o=>{l.error("解禁评论失败："+o.message)})}function D(s){r.value=s,n()}return(s,o)=>(f(),h("div",null,[F,t("p",null,"评论总数："+a(u.value),1),t("p",null,"当前页："+a(r.value)+" , 总页数："+a(Math.ceil(u.value/p(g))),1),t("table",q,[A,G,(f(!0),h(M,null,V(i.value,e=>(f(),h("tr",null,[t("td",null,a(e.cid),1),t("td",H,a(e.text),1),t("td",J,a(e.user.nickname+"("+e.user.uid+")"),1),t("td",K,a(e.post.title+"("+e.post.pid+")"),1),t("td",null,a(e.ip),1),t("td",null,a(e.replyTo),1),t("td",{class:j(e.status===2?"text-red-500":"")},a(k[e.status]),3),t("td",O,a(p(E)(e.createdAt)),1),t("td",null,[_(m,{onClick:N=>x(e.cid,e.status)},{default:w(()=>[C(a(e.status===0?"标记为违规":"标记为正常"),1)]),_:2},1032,["onClick"]),_(m,{onClick:N=>b(e.cid)},{default:w(()=>[C("删除")]),_:2},1032,["onClick"])])]))),256))]),_($,{"current-page":r.value,"total-count":u.value,"page-size":p(g),onChange:D},null,8,["current-page","total-count","page-size"])]))}});export{tt as default};
