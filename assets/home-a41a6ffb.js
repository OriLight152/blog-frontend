import{d as g,u as k,j as y,r as i,n as d,o as b,z as N,c as P,k as o,A as c,B as m,a as V,w as B,C as v,g as C,h as I}from"./index-7fb9b2a6.js";import{N as p}from"./nprogress-131c7954.js";import{_ as T}from"./NormalButton.vue_vue_type_script_setup_true_lang-77d36fc7.js";const z=o("p",{class:"mb-4 text-2xl font-bold"},"个人资料",-1),A={class:"my-2"},D=o("h3",null,"修改昵称",-1),E={class:"my-2"},M=o("h3",null,"修改密码",-1),Z=g({__name:"home",setup(U){const r=k(),n=y(),f=/^(?=.*?[a-zA-Z])(?=.*?[0-9]).{6,30}$/,l=i(),h=d(()=>e.value.length>=2&&e.value.length<=20||e.value==""),_=d(()=>f.test(a.value)||a.value==""),e=i("加载中"),a=i("");b(()=>{w()});async function w(){p.start(),N(r.uid).then(t=>{l.value=t.userInfo,e.value=l.value.nickname}).catch(t=>{n.error(t.message)}).finally(()=>{p.done()})}function x(){let t;if(e.value.trim()==""){n.warning("新昵称不可为空");return}if(!h.value){n.warning("昵称格式错误");return}if(a.value.trim()=="")t=v(r.token,e.value);else if(_.value)t=v(r.token,e.value.trim(),a.value.trim());else{n.warning("密码格式错误");return}t.then(s=>{l.value=s.userInfo,a.value="",n.success("保存成功")}).catch(s=>{n.error("保存失败"+s)})}return(t,s)=>(C(),P("div",null,[z,o("div",A,[D,c(o("input",{class:"px-2 py-1 w-[300px] rounded-md border hover:border-blue-500 transition-colors",type:"text","onUpdate:modelValue":s[0]||(s[0]=u=>e.value=u)},null,512),[[m,e.value]])]),o("div",E,[M,c(o("input",{class:"px-2 py-1 w-[300px] rounded-md border hover:border-blue-500 transition-colors",type:"password","onUpdate:modelValue":s[1]||(s[1]=u=>a.value=u),placeholder:"留空则不修改"},null,512),[[m,a.value]])]),V(T,{primary:"",onClick:x},{default:B(()=>[I("保存")]),_:1})]))}});export{Z as default};
