import{d as w,u as y,j as b,r as d,n as p,o as g,z as k,c as N,k as e,A as i,B as c,a as V,w as P,C as B,g as C,h as A}from"./index-e63abaa2.js";import{N as m}from"./nprogress-131c7954.js";import{_ as I}from"./NormalButton.vue_vue_type_script_setup_true_lang-3a9d7b55.js";const T=e("p",{class:"mb-4 text-2xl font-bold"},"个人资料",-1),U={class:"my-2"},z=e("h3",null,"修改昵称",-1),D={class:"my-2"},E=e("h3",null,"修改密码",-1),M={class:"my-2"},$=e("h3",null,"修改头像",-1),F=w({__name:"home",setup(j){const v=y(),n=b(),h=/^(?=.*?[a-zA-Z])(?=.*?[0-9]).{6,30}$/,l=d(),f=p(()=>t.value.length>=2&&t.value.length<=20||t.value=="");p(()=>h.test(a.value)||a.value=="");const t=d("加载中"),a=d(""),u=d("加载中");g(()=>{_()});async function _(){m.start(),k(v.uid).then(o=>{l.value=o.userInfo,t.value=l.value.nickname,u.value=l.value.avatar}).catch(o=>{n.error(o.message)}).finally(()=>{m.done()})}function x(){if(t.value.trim()==""){n.warning("新昵称不可为空");return}if(!f.value){n.warning("昵称格式错误");return}B(v.token,t.value.trim(),a.value.trim(),u.value.trim()).then(o=>{l.value=o.userInfo,a.value="",n.success("保存成功")}).catch(o=>{n.error("保存失败"+o)})}return(o,s)=>(C(),N("div",null,[T,e("div",U,[z,i(e("input",{class:"px-2 py-1 w-[300px] rounded-md border hover:border-blue-500 transition-colors",type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r)},null,512),[[c,t.value]])]),e("div",D,[E,i(e("input",{class:"px-2 py-1 w-[300px] rounded-md border hover:border-blue-500 transition-colors",type:"password","onUpdate:modelValue":s[1]||(s[1]=r=>a.value=r),placeholder:"留空则不修改"},null,512),[[c,a.value]])]),e("div",M,[$,i(e("input",{class:"px-2 py-1 w-[300px] rounded-md border hover:border-blue-500 transition-colors",type:"text","onUpdate:modelValue":s[2]||(s[2]=r=>u.value=r),placeholder:"留空则不修改"},null,512),[[c,u.value]])]),V(I,{primary:"",onClick:x},{default:P(()=>[A("保存")]),_:1})]))}});export{F as default};
