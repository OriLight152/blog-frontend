import{d as _,u as w,n as h,b as x,t as V,r,J as b,c as k,k as a,j as y,E as g,f as B,m,e as C,w as E,h as u,i as N}from"./index-fd957ea8.js";import{m as P}from"./index-74aade08.js";import{l as T,_ as U,a as $}from"./NormalEditor.vue_vue_type_script_setup_true_lang-deda76ec.js";import{_ as R}from"./NormalButton.vue_vue_type_script_setup_true_lang-c3e085ee.js";import{n as j}from"./post-7b8040a7.js";import"./_commonjsHelpers-28e086c5.js";import"./IconView-9fe8a130.js";import"./_plugin-vue_export-helper-c27b6911.js";const D=a("p",{class:"mb-4 text-2xl font-bold"},"发布文章",-1),J={class:"w-full"},M=a("p",{class:"my-2 font-bold"},"标题",-1),S=a("p",{class:"my-2 font-bold"},"内容",-1),O=_({__name:"post-new",setup(q){const i=w(),l=h(),c=x(),{setting:d}=V(i),n=r(""),e=r(""),p=r(""),f=T.exports.debounce(o=>{p.value=P.parse(o)},100);b(()=>{f(e.value)});async function v(){if(n.value.trim()==""){l.warning("文章标题不可为空");return}if(e.value.trim()==""){l.warning("文章内容不可为空");return}j(i.token,n.value.trim(),e.value.trim()).then(o=>{l.success("发布成功"),c.push("/admin/mypost")}).catch(o=>{l.error("发布失败: "+o)})}return(o,t)=>(u(),k("div",null,[D,a("div",J,[M,y(a("input",{class:"w-full px-2 py-1 rounded-md border hover:border-blue-500 transition-colors","onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),placeholder:"有什么新鲜事要向大家分享？",maxlength:"30"},null,512),[[g,n.value]]),S,B(d).legacyEditor?(u(),m(U,{key:0,modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=s=>e.value=s)},null,8,["modelValue"])):(u(),m($,{key:1,class:"h-[calc(100vh-320px)]",modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value=s)},null,8,["modelValue"])),C(R,{class:"mt-2",primary:"",onClick:v},{default:E(()=>[N("发布")]),_:1})])]))}});export{O as default};
