import{g as b,d as y}from"./post-0ff8842a.js";import{d as L,u as N,j as P,r as _,o as z,c as s,F as v,k as t,b as B,a as n,e as D,g as a,w as c,h as p,l as h,p as S,f as V}from"./index-7fb9b2a6.js";import{N as w}from"./nprogress-131c7954.js";import{_ as k}from"./NormalButton.vue_vue_type_script_setup_true_lang-77d36fc7.js";import{_ as $}from"./Pagination.vue_vue_type_script_setup_true_lang-540c9b31.js";const F=t("p",{class:"mb-4 text-2xl font-bold"},"文章管理",-1),R={key:0,class:"text-center pb-4"},T=t("span",null,"这里还什么都没有呢",-1),j=[T],E={class:"w-full table-fixed text-center"},M=t("colgroup",null,[t("col",{width:"700"}),t("col",{width:"10%"}),t("col",{width:"10%"}),t("col",{width:"30%"})],-1),q=t("tr",null,[t("th",null,"标题"),t("th",null,"浏览量"),t("th",null,"评论数"),t("th",null,"操作")],-1),A={class:"whitespace-nowrap overflow-ellipsis"},U=L({__name:"mypost",setup(G){const f=N(),u=P(),l=_([]),r=_(1),m=_(0);z(()=>{i()});function i(){w.start(),l.value=[],b(r.value,f.uid).then(e=>{l.value=e.posts,m.value=e.count}).catch(e=>{u.error(e.message)}).finally(()=>{w.done()})}function x(e){y(f.token,e).then(d=>{u.success("删除成功"),i()}).catch(d=>{u.error("删除失败："+d.message)})}function C(e){r.value=e,i()}return(e,d)=>{const g=V("RouterLink");return a(),s("div",null,[F,l.value.length===0?(a(),s("div",R,j)):(a(),s(v,{key:1},[t("table",E,[M,q,(a(!0),s(v,null,B(l.value,o=>(a(),s("tr",null,[t("td",A,[n(g,{to:"/post/"+o.pid},{default:c(()=>[p(h(o.title),1)]),_:2},1032,["to"])]),t("td",null,h(o.viewCount),1),t("td",null,h(o._count.comments),1),t("td",null,[n(g,{to:"/post/edit/"+o.pid},{default:c(()=>[n(k,null,{default:c(()=>[p("编辑")]),_:1})]),_:2},1032,["to"]),n(k,{class:"ml-2",onClick:H=>x(o.pid)},{default:c(()=>[p("删除")]),_:2},1032,["onClick"])])]))),256))]),n($,{"current-page":r.value,"total-count":m.value,"page-size":D(S),onChange:C},null,8,["current-page","total-count","page-size"])],64))])}}});export{U as default};
