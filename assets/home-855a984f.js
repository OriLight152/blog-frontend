import{d as _,u as h,a as k,b as w,r as a,o as y,c as p,e as s,w as c,f as b,T as x,g as C,h as L,i as n,j as N,k as B,v as R,l as S,F as q,m as z,n as P,p as T}from"./index-c038dcfe.js";import{_ as V}from"./PostPreview.vue_vue_type_script_setup_true_lang-dd63b07d.js";import{N as m}from"./nprogress-a817ebd9.js";import{g as $}from"./post-80bc65f1.js";import{_ as D}from"./Pagination.vue_vue_type_script_setup_true_lang-3d6e0976.js";import"./index-74aade08.js";import"./IconComment-0e401121.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./IconLikeS-a3e9f386.js";import"./IconView-9e4f15bf.js";import"./_commonjsHelpers-28e086c5.js";const W=_({__name:"home",setup(F){const r=h(),u=k(),d=w(),t=a([]),o=a(1),l=a(0);y(()=>{u.query.page&&(o.value=Number(u.query.page)),i()});function i(){m.start(),r.pageLoading=!0,t.value=[],$(o.value).then(e=>{t.value=e.posts,l.value=e.count}).finally(()=>{m.done(),r.pageLoading=!1})}function g(e){o.value=e,d.push({query:{page:e}}),i()}return(e,j)=>{const f=L("RouterLink");return n(),p("div",null,[s(f,{class:"w-full text-center text-2xl font-bold block py-4 my-2 bg-white hover:bg-gray-200 transition-colors rounded-md shadow-sm",to:"/post/35"},{default:c(()=>[N(" 点击前往作业报告 ")]),_:1}),b(e.$slots,"loading"),s(x,{name:"popup-t"},{default:c(()=>[B(S("div",null,[(n(!0),p(q,null,z(t.value,v=>(n(),P(V,{"post-data":v},null,8,["post-data"]))),256))],512),[[R,t.value.length!==0]])]),_:1}),s(D,{"current-page":o.value,"total-count":l.value,"page-size":C(T),onChange:g},null,8,["current-page","total-count","page-size"])])}}});export{W as default};
